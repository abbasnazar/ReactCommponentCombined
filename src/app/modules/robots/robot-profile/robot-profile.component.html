<div class="content-layout fullwidth-basic-normal-scroll">
  <!-- Main -->
  <div class="main">
    <!-- Header -->
    <div class="header">
      <!-- Title -->

      <div class="title">
        <strong class="link" onclick="back()">
          <span
            style="
              font-size: 12px;
              position: relative;
              top: -1px;
              margin-right: 5px;
            "
            >‚ùÆ
          </span>
          Back
        </strong>
        <h1>{{ profileData.name || "-" }}</h1>

        <!-- <div class=" remaining-tasks-count "> -->
        <!-- <span>{{rows.length}} Types</span> -->
        <!-- </div> -->
      </div>

      <!-- Main actions -->
      <div class="main-actions">
        <span class="search">
          <!-- <mat-form-field class=" treo-mat-dense treo-mat-no-subscript ">
                        <mat-icon matPrefix [svgIcon]=" 'search' "></mat-icon>
                        <input matInput [autocomplete]=" 'off' " [(ngModel)]=" filterObj.search " (ngModelChange)=" search() "
                            [placeholder]=" 'Search' ">
                    </mat-form-field> -->
        </span>
        <button
          class="add-section mr-2"
          (click)="viewAppliedJob()"
          mat-flat-button
          [color]="'primary'"
        >
          <mat-icon svgIcon="heroicons_outline:briefcase"></mat-icon>
          View Applied Job
        </button>

        <button
          class="add-section"
          (click)="download()"
          mat-flat-button
          [color]="'primary'"
        >
          <mat-icon [svgIcon]="'heroicons_solid:download'"></mat-icon>
          Download Resume
        </button>
      </div>
    </div>

    <div class="p-2">
      <h3 class="pl-5">AI Metrics</h3>
      <div class="flex flex-wrap w-full">
        <div class="flex flex-auto gt-xs:w-1/4 h-55 p-2 bg-transparent">
          <div
            class="flex flex-col flex-auto p-6 pb-4 bg-card rounded overflow-hidden"
            style="border: 1px solid #c1ccdc"
          >
            <div class="items-center justify-between">
              <div class="flex flex-col">
                <div class="font-semibold text-3xl">
                  <div style="float: left">Relevance</div>
                  <div style="float: right">
                    {{ profileData.relevance * 100 | number: "1.0-1" }}%
                  </div>
                </div>
                <!-- <div class="text-sm text-hint font-medium">Number of purchases</div> -->
              </div>
            </div>
            <div class="items-center mt-auto">
              <div class="flex flex-col pb-8">
                <div
                  *ngIf="persentageCalculation(profileData.relevance) < 30"
                  class="flex mt-3 items-end w-full h-5 bg-gray-200 rounded overflow-hidden"
                >
                  <span
                    class="flex h-full bg-red-600"
                    [style.width]="
                      persentageCalculation(profileData.relevance) + '%'
                    "
                  ></span>
                </div>
                <div
                  *ngIf="
                    persentageCalculation(profileData.relevance) >= 30 &&
                    persentageCalculation(profileData.relevance) < 60
                  "
                  class="flex mt-3 items-end w-full h-5 bg-gray-200 rounded overflow-hidden"
                >
                  <span
                    class="flex h-full bg-orange-600"
                    [style.width]="
                      persentageCalculation(profileData.relevance) + '%'
                    "
                  ></span>
                </div>
                <div
                  *ngIf="persentageCalculation(profileData.relevance) >= 60"
                  class="flex mt-3 items-end w-full h-5 bg-gray-200 rounded overflow-hidden"
                >
                  <span
                    class="flex h-full bg-green-400"
                    [style.width]="
                      persentageCalculation(profileData.relevance) + '%'
                    "
                  ></span>
                </div>
              </div>
              <div class="flex flex-col">
                <div class="tracking-tighter leading-tight">
                  This candidate has some of the relevant skills for the
                  position.
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="flex flex-auto gt-xs:w-1/4 h-55 p-2 bg-transparent">
          <div
            class="flex flex-col flex-auto p-6 pb-4 bg-card rounded overflow-hidden"
            style="border: 1px solid #c1ccdc"
          >
            <div class="items-center justify-between">
              <div class="flex flex-col">
                <div class="font-semibold text-3xl">
                  <div style="float: left">Willingness</div>
                  <div style="float: right">
                    {{ profileData.willingness * 100 | number: "1.0-1" }}%
                  </div>
                </div>
                <!-- <div class="text-sm text-hint font-medium">Number of purchases</div> -->
              </div>
            </div>
            <div class="items-center mt-auto">
              <div class="flex flex-col pb-8">
                <div
                  *ngIf="persentageCalculation(profileData.willingness) < 30"
                  class="flex mt-3 items-end w-full h-5 bg-gray-200 rounded overflow-hidden"
                >
                  <span
                    class="flex h-full bg-red-600"
                    [style.width]="
                      persentageCalculation(profileData.willingness) + '%'
                    "
                  ></span>
                </div>
                <div
                  *ngIf="
                    persentageCalculation(profileData.willingness) >= 30 &&
                    persentageCalculation(profileData.willingness) < 60
                  "
                  class="flex mt-3 items-end w-full h-5 bg-gray-200 rounded overflow-hidden"
                >
                  <span
                    class="flex h-full bg-orange-600"
                    [style.width]="
                      persentageCalculation(profileData.willingness) + '%'
                    "
                  ></span>
                </div>
                <div
                  *ngIf="persentageCalculation(profileData.willingness) >= 60"
                  class="flex mt-3 items-end w-full h-5 bg-gray-200 rounded overflow-hidden"
                >
                  <span
                    class="flex h-full bg-green-400"
                    [style.width]="
                      persentageCalculation(profileData.willingness) + '%'
                    "
                  ></span>
                </div>
              </div>
              <div class="flex flex-col">
                <div class="tracking-tighter leading-tight">
                  This candidate has some of the relevant skills for the
                  position.
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="flex flex-auto gt-xs:w-1/4 h-55 p-2 bg-transparent">
          <div
            class="flex flex-col flex-auto p-6 pb-4 bg-card rounded overflow-hidden"
            style="border: 1px solid #c1ccdc"
          >
            <div class="items-center justify-between">
              <div class="flex flex-col">
                <div class="font-semibold text-3xl">
                  <div style="float: left">POS</div>
                  <div style="float: right">
                    {{ profileData.pos * 100 | number: "1.0-1" }}%
                  </div>
                </div>
                <!-- <div class="text-sm text-hint font-medium">Number of purchases</div> -->
              </div>
            </div>
            <div class="items-center mt-auto">
              <div class="flex flex-col pb-8">
                <div
                  *ngIf="persentageCalculation(profileData.pos) < 30"
                  class="flex mt-3 items-end w-full h-5 bg-gray-200 rounded overflow-hidden"
                >
                  <span
                    class="flex h-full bg-red-600"
                    [style.width]="persentageCalculation(profileData.pos) + '%'"
                  ></span>
                </div>
                <div
                  *ngIf="
                    persentageCalculation(profileData.pos) >= 30 &&
                    persentageCalculation(profileData.pos) < 60
                  "
                  class="flex mt-3 items-end w-full h-5 bg-gray-200 rounded overflow-hidden"
                >
                  <span
                    class="flex h-full bg-orange-600"
                    [style.width]="persentageCalculation(profileData.pos) + '%'"
                  ></span>
                </div>
                <div
                  *ngIf="persentageCalculation(profileData.pos) >= 60"
                  class="flex mt-3 items-end w-full h-5 bg-gray-200 rounded overflow-hidden"
                >
                  <span
                    class="flex h-full bg-green-400"
                    [style.width]="persentageCalculation(profileData.pos) + '%'"
                  ></span>
                </div>
              </div>
              <div class="flex flex-col">
                <div class="tracking-tighter leading-tight">
                  This candidate has some of the relevant skills for the
                  position.
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="flex flex-auto gt-xs:w-1/4 h-55 p-2 bg-transparent">
          <div
            class="flex flex-col flex-auto p-6 pb-4 bg-card rounded overflow-hidden"
            style="border: 1px solid #c1ccdc"
          >
            <div class="items-center justify-between">
              <div class="flex flex-col">
                <div class="font-semibold text-3xl">
                  <div style="float: left">Overall</div>
                  <div style="float: right">
                    {{ profileData.overall * 100 | number: "1.0-1" }}%
                  </div>
                </div>
                <!-- <div class="text-sm text-hint font-medium">Number of purchases</div> -->
              </div>
            </div>
            <div class="items-center mt-auto">
              <div class="flex flex-col pb-8">
                <div
                  *ngIf="persentageCalculation(profileData.overall) < 30"
                  class="flex mt-3 items-end w-full h-5 bg-gray-200 rounded overflow-hidden"
                >
                  <span
                    class="flex h-full bg-red-600"
                    [style.width]="
                      persentageCalculation(profileData.overall) + '%'
                    "
                  ></span>
                </div>
                <div
                  *ngIf="
                    persentageCalculation(profileData.overall) >= 30 &&
                    persentageCalculation(profileData.overall) < 60
                  "
                  class="flex mt-3 items-end w-full h-5 bg-gray-200 rounded overflow-hidden"
                >
                  <span
                    class="flex h-full bg-orange-600"
                    [style.width]="
                      persentageCalculation(profileData.overall) + '%'
                    "
                  ></span>
                </div>
                <div
                  *ngIf="persentageCalculation(profileData.overall) >= 60"
                  class="flex mt-3 items-end w-full h-5 bg-gray-200 rounded overflow-hidden"
                >
                  <span
                    class="flex h-full bg-green-400"
                    [style.width]="
                      persentageCalculation(profileData.overall) + '%'
                    "
                  ></span>
                </div>
              </div>
              <div class="flex flex-col">
                <div class="tracking-tighter leading-tight">
                  This candidate has some of the relevant skills for the
                  position.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="flex flex-col gt-xs:flex-row">
      <div
        class="gt-xs:w-1/2 p-6 pb-4 bg-card shadow-md rounded overflow-hidden"
      >
        <div class="h-100">
          <h2>Communication</h2>
          <mat-tab-group (selectedTabChange)="chatSelection($event)">
            <mat-tab label="Whatsapp">
              <div style="height: 42vh; overflow: auto">
                <div *ngFor="let chat of chatHistory" class="mat-tab-chatbot">
                  <div class="{{ chat.type }}">{{ chat.msg }}</div>
                  <br /><br />
                </div>
                <p *ngIf="chatHistory.length == 0">No Data Found</p>
              </div>
            </mat-tab>
            <mat-tab label="LinkedIn">
              <div *ngFor="let chat of linkedinChatHistory">
                <br />
                <div class="{{ chat.type }}">{{ chat.msg }}</div>
                <br />
              </div>
              <p *ngIf="linkedinChatHistory.length == 0">No Data Found</p>
            </mat-tab>
            <mat-tab label="Email">
              <div style="height: 42vh; overflow: auto">
                <div *ngFor="let chat of emailchatHistory">
                  <br />
                  <div style="width: 100%">
                    <div
                      (click)="showMail('Email', chat)"
                      class="{{ chat.type }}"
                    >
                      {{ chat.subject }}
                    </div>
                  </div>
                </div>
                <br />
                <div *ngIf="emailchatHistory.length > 0">
                  <div
                    (click)="showMail('Reply', {})"
                    class="client"
                    style="cursor: pointer; background: #5868e5; color: white"
                  >
                    <i class="fa fa-reply"></i> Reply
                  </div>
                  <br /><br /><br />
                  <br />
                </div>
                <p *ngIf="emailchatHistory.length == 0">No Data Found</p>
              </div>
            </mat-tab>
            <mat-tab label="Calls">
              <div style="height: 42vh; overflow: auto">
                <div *ngFor="let call of callHistory">
                  <br />
                  <div class="client">
                    <audio
                      controls
                      [src]="callrecordingdomain.concat(call.recording)"
                    ></audio>
                    <br />
                    {{ call.calldate }} {{ call.calltime }}
                  </div>
                  <br />
                </div>
              </div>
              <p *ngIf="emailchatHistory.length == 0">No Data Found</p>
            </mat-tab>
          </mat-tab-group>
        </div>
      </div>
      <div
        class="gt-xs:w-1/2 p-6 pb-4 bg-card shadow-md rounded overflow-hidden"
      >
        <div class="h-100">
          <h2>Video</h2>
          <div style="border: 1px solid lightblue">
            <video
              style="height: 40vh; width: 100%"
              src="{{ getVideoPath() }}"
              frameborder="0"
              controls
              allowfullscreen
            ></video>
          </div>
        </div>
      </div>
    </div>

    <div class="flex flex-col gt-xs:flex-row">
      <div
        class="gt-xs:w-1/2 p-6 pb-4 bg-card shadow-md rounded overflow-hidden"
      >
        <div>
          <h2>Basic Details</h2>
          <div class="p-5" style="border: 1px solid lightblue; height: 100vh">
            <strong style="font-size: 17px">{{
              profileData.name || "-"
            }}</strong
            ><br />
            {{ profileData.email || "-" }} <br />{{ profileData.mobile || "-"
            }}<br /><br />
            <strong style="font-size: 17px">Social Media</strong><br /><br />
            <div class="link">
              <mat-icon svgIcon="mat_outline:facebook"></mat-icon> &nbsp;
              {{ profileData.facebook || "-" }}
            </div>
            <div class="link">
              <mat-icon svgIcon="feather:twitter"></mat-icon> &nbsp;
              {{ profileData.twitter || "-" }}
            </div>
            <div class="link">
              <mat-icon svgIcon="feather:linkedin"></mat-icon> &nbsp;
              {{ profileData.linkedin || "-" }}
            </div>
            <div class="link">
              <mat-icon svgIcon="feather:instagram"></mat-icon> &nbsp;
              {{ profileData.instagram || "-" }}
            </div>
            <br /><strong style="font-size: 17px">Activity</strong><br /><br />

            <br /><strong style="font-size: 17px">Notes</strong><br /><br />

            <br /><strong style="font-size: 17px">Qualification</strong
            ><br /><br />
            {{ profileData.highestdegree || "-" }} <br /><strong
              style="font-size: 17px"
              >Licenses</strong
            ><br /><br />

            <br /><strong style="font-size: 17px">Experience</strong
            ><br /><br />
            {{ profileData.workexperience || "-" }}
          </div>
        </div>
      </div>
      <div
        class="p-6 gt-xs:w-1/2 pb-4 bg-card shadow-md rounded overflow-hidden"
      >
        <div>
          <h2>Resume</h2>
          <div style="border: 1px solid lightblue">
            <iframe
              style="width: 100%; height: 100vh"
              frameborder="0"
              webkitallowfullscreen
              mozallowfullscreen
              allowfullscreen
            >
            </iframe>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
